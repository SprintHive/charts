# Default values for jenkins.
# This is a YAML-formatted file.
# Declare name/value pairs to be passed into your templates.
# name: value

Master:
  ServiceType: ClusterIP
  Image: jenkins/jenkins
  ImageTag: alpine
  resources:
    requests:
      memory: "1Gi"
    limits:
      memory: "1Gi"
  InstallPlugins:
      - kubernetes:1.14.8
      - kubernetes-pipeline-devops-steps:1.6
      - kubernetes-pipeline-steps:1.6
      - workflow-aggregator:2.6
      - credentials-binding:1.18
      - git:3.9.3
      - amazon-ecr:1.6
      - google-oauth-plugin:0.7
      - google-container-registry-auth:0.3
      - bitbucket:1.1.8
      - cloudbees-bitbucket-branch-source:2.4.2
      - slack:2.18
      - global-slack-notifier:1.5
      - Parameterized-Remote-Trigger:3.0.7
# Used to approve a list of groovy functions in pipelines used the script-security plugin. Can be viewed under /scriptApproval
  ScriptApproval:
     - staticMethod org.codehaus.groovy.runtime.DefaultGroovyMethods invokeMethod java.lang.Object java.lang.String java.lang.Object
     - method java.lang.String getBytes
     - staticMethod org.codehaus.groovy.runtime.EncodingGroovyMethods encodeBase64 byte[]
     - staticMethod org.codehaus.groovy.runtime.EncodingGroovyMethods decodeBase64 java.lang.String

  #   - "method groovy.json.JsonSlurperClassic parseText java.lang.String"
  #   - "new groovy.json.JsonSlurperClassic"
# List of groovy init scripts to be executed during Jenkins master start
  InitScripts:
     - |
        import org.jenkinsci.plugins.workflow.libs.*;
        import jenkins.plugins.git.GitSCMSource;
        import java.util.Collections;

        GlobalLibraries globalLibraries = GlobalLibraries.get();

        LibraryConfiguration shLibrary = new LibraryConfiguration("github.com/SprintHive/sprinthive-pipeline-library", new SCMSourceRetriever(new GitSCMSource(null, "https://github.com/SprintHive/sprinthive-pipeline-library.git", "", "origin", "+refs/heads/*:refs/remotes/origin/*", "*", "", true)));
        shLibrary.setDefaultVersion("master");
        shLibrary.setAllowVersionOverride(true);

        globalLibraries.setLibraries(Collections.singletonList(shLibrary));
  Ingress:
    Annotations:
      kubernetes.io/ingress.class: kong

Agent:
  ImageTag: alpine

Persistence:
  Size: 5Gi

rbac:
  install: true
  # RBAC api version (currently either v1beta1 or v1alpha1)
  apiVersion: v1beta1
  # Cluster role reference
  roleRef: jenkins
  roleBindingKind: RoleBinding
